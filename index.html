<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Family Feud Buzzer</title>
    <style>
      body {
        font-family: sans-serif;
        text-align: center;
        margin-top: 50px;
      }

      h1 {
        font-size: 2em;
        margin-bottom: 20px;
      }

      #winner {
        font-size: 3em;
        margin: 40px 0;
        color: #333;
      }

      #resetBtn {
        padding: 10px 20px;
        font-size: 1em;
        cursor: pointer;
      }

      .instructions {
        font-size: 1.2em;
        margin-top: 30px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <h1>Family Feud Buzzer</h1>
    <div id="winner">Press the Space Bar or Click the Mouse!</div>
    <button id="resetBtn" style="display: none">Reset</button>

    <div class="instructions">
      Player 1: Press SPACE BAR<br />
      Player 2: Click LEFT MOUSE BUTTON<br /><br />
      Press ENTER or Click RESET to Start Over
    </div>

    <script>
      let hasWinner = false;
      const winnerDisplay = document.getElementById("winner");
      const resetBtn = document.getElementById("resetBtn");

      document.addEventListener("keydown", function (e) {
        // Space for Player 1
        if (!hasWinner && e.code === "Space") {
          hasWinner = true;
          declareWinner("Player 1 Buzzed In First!");
        }

        // Enter key to reset if there's already a winner
        if (hasWinner && e.code === "Enter") {
          resetGame();
        }
      });

      document.addEventListener("mousedown", function (e) {
        // Left mouse button for Player 2
        if (!hasWinner && e.button === 0) {
          hasWinner = true;
          declareWinner("Player 2 Buzzed In First!");
        }
      });

      resetBtn.addEventListener("click", resetGame);

      function declareWinner(message) {
        winnerDisplay.textContent = message;
        resetBtn.style.display = "inline-block";
        playBeepSequence(5); // Play 5 short beeps
      }

      function resetGame() {
        hasWinner = false;
        winnerDisplay.textContent = "Press the Space Bar or Click the Mouse!";
        resetBtn.style.display = "none";
      }

      // Plays a sequence of beeps. Each beep lasts for 'beepDuration' seconds,
      // and there is a short pause before the next beep starts.
      function playBeepSequence(count) {
        if (count <= 0) return;
        const beepDuration = 0.05; // seconds
        const silenceAfterBeep = 0.05; // seconds of silence after each beep

        // Create the audio context for each beep
        const audioContext = new (window.AudioContext ||
          window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = "sine";
        oscillator.frequency.value = 440; // A4 note
        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();
        oscillator.stop(audioContext.currentTime + beepDuration);

        // Schedule the next beep after the current one finishes plus the silence
        setTimeout(() => {
          playBeepSequence(count - 1);
        }, (beepDuration + silenceAfterBeep) * 1000);
      }
    </script>
  </body>
</html>
